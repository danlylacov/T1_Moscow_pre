test:
  stage: test
  image: node:${NODE_VERSION:-18}
  cache:
    key: ${CI_COMMIT_REF_SLUG}-node
    paths:
      - node_modules/
  dependencies: []
  before_script:
    - npm ci --cache .npm --prefer-offline || npm install
  script:
    - npm test || mocha --reporter spec
  artifacts:
    paths:
      - test-results/
    expire_in: 1 week

