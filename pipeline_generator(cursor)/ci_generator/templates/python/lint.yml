lint:
  stage: lint
  image: python:${PYTHON_VERSION:-3.11}
  cache:
    key: ${CI_COMMIT_REF_SLUG}-python
    paths:
      - .pip-cache
  dependencies: []
  before_script:
    - pip install --cache-dir .pip-cache flake8 pylint black isort mypy
  script:
    - flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
    - flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
    - pylint **/*.py || true
    - black --check .
    - isort --check-only .
    - mypy . --ignore-missing-imports || true
  allow_failure: true

